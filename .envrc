#!/usr/bin/env bash

#source_url \
#  "https://raw.githubusercontent.com/paisano-nix/direnv/main/lib" \
#  "sha256-XKqDMz+VtF8VSJ4yOok4mO1xxXUZbD1t2yC0JmEXrCI="

# Valen said something about this breaking TOFU
#
#URL="https://raw.githubusercontent.com/paisano-nix/direnv/main/lib"
#source_url \
#  "$URL" \
#  "$(direnv fetchurl "$URL" | xargs echo)"

use nix

# pinned to a specific commit
source_url \
  "https://raw.githubusercontent.com/paisano-nix/direnv/41d9b206769791263a5fd3aadf883826620114bd/lib" \
  "sha256-R3K8Flvbovj4IOvdlWNtQKLMMSQV464WjG9eU29ixHk="

use_envreload \
  //repo/devshells/default \
  //repo/configs \
  //repo/packages

export PATH=$PWD/scripts:$PATH

# update the submodules when entering the repo
git submodule update --recursive --remote
